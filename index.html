<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Направление движения по мосту</title>
<style>
  body {
    margin:0;
    font-family: Arial, sans-serif;
    background:#000;
    color:#fff;
    display:flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    box-sizing: border-box;
    text-align: center;
  }
  .arrow {
    font-size: 25vw;
    max-font-size: 160px;
    line-height:1;
    transition:0.5s;
  }
  .text {
    font-size: 8vw;
    font-weight:bold;
    margin: 20px 0;
    transition:0.5s;
  }
  .info {
    font-size: 5vw;
    color:#ccc;
    margin-top: 10px;
  }
  table {
    width: 100%;
    max-width: 500px;
    margin-top: 20px;
    border-collapse: collapse;
  }
  th, td {
    border: 1px solid #555;
    padding: 8px;
    text-align: center;
  }
  th {
    background: #222;
  }
  td {
    font-size: 4vw;
  }
  @media (min-width: 600px){
    .arrow { font-size: 160px; }
    .text { font-size: 48px; }
    .info { font-size: 28px; }
    td { font-size: 18px; }
  }
</style>
</head>
<body>

<div class="arrow" id="arrow">➡️</div>
<div class="text" id="text">ДВИЖЕНИЕ С ЛЕВОГО БЕРЕГА</div>
<div class="info">
  <div>Интервал: <span id="interval">05:00 – 08:29</span></div>
  <div id="time">Омское время: 00:00:00</div>
  <div id="countdown">До смены: 00:00:00</div>
</div>

<!-- Таблица интервалов -->
<table>
  <thead>
    <tr>
      <th>Интервал</th>
      <th>Направление</th>
    </tr>
  </thead>
  <tbody id="schedule-table">
    <!-- JS заполнит таблицу -->
  </tbody>
</table>

<script>
const schedule = [
    [300, 509,  "С ЛЕВОГО БЕРЕГА",  "➡️", "#1e7e34", "05:00 – 08:29"],
    [510, 569,  "С ПРАВОГО БЕРЕГА", "⬅️", "#004085", "08:30 – 09:29"],
    [570, 659,  "С ЛЕВОГО БЕРЕГА",  "➡️", "#1e7e34", "09:30 – 10:59"],
    [660, 734,  "С ПРАВОГО БЕРЕГА", "⬅️", "#004085", "11:00 – 12:14"],
    [735, 824,  "С ЛЕВОГО БЕРЕГА",  "➡️", "#1e7e34", "12:15 – 13:44"],
    [825, 899,  "С ПРАВОГО БЕРЕГА", "⬅️", "#004085", "13:45 – 14:59"],
    [900, 989,  "С ЛЕВОГО БЕРЕГА",  "➡️", "#1e7e34", "15:00 – 16:29"],
    [990, 1184, "С ПРАВОГО БЕРЕГА", "⬅️", "#004085", "16:30 – 19:44"],
    [1185,1229, "С ЛЕВОГО БЕРЕГА",  "➡️", "#1e7e34", "19:45 – 20:29"],
    [1230,1274, "С ПРАВОГО БЕРЕГА", "⬅️", "#004085", "20:30 – 21:14"],
    [1275,1379, "С ЛЕВОГО БЕРЕГА",  "➡️", "#1e7e34", "21:15 – 22:59"],
    [1380, 1439, "С ПРАВОГО БЕРЕГА", "⬅️", "#004085", "23:00 – 23:59"], // ночь до полуночи
    [0, 299, "С ПРАВОГО БЕРЕГА", "⬅️", "#004085", "00:00 – 04:59"]       // ночь после полуночи
];

function getBridgeStatus() {
    const now = new Date();
    const hours = now.getHours();
    const minutes = now.getMinutes();
    const seconds = now.getSeconds();
    const totalMinutes = hours * 60 + minutes;
    
    for (let s of schedule) {
        if (totalMinutes >= s[0] && totalMinutes <= s[1]) {
            return {
                text: "ДВИЖЕНИЕ " + s[2],
                arrow: s[3],
                color: s[4],
                interval: s[5],
                nextChangeMinutes: s[1] + 1,
                nowSeconds: hours*3600 + minutes*60 + seconds
            };
        }
    }
}

function updateBridgeStatus() {
    const status = getBridgeStatus();

    document.getElementById('arrow').textContent = status.arrow;
    const textEl = document.getElementById('text');
    textEl.textContent = status.text;
    textEl.style.color = status.color;
    document.getElementById('interval').textContent = status.interval;

    const now = new Date();
    const hh = String(now.getHours()).padStart(2,'0');
    const mm = String(now.getMinutes()).padStart(2,'0');
    const ss = String(now.getSeconds()).padStart(2,'0');
    document.getElementById('time').textContent = `Омское время: ${hh}:${mm}:${ss}`;

    // обратный отсчёт
    let nextChangeSec;
    if (status.nextChangeMinutes > ((now.getHours()*60)+now.getMinutes())) {
        nextChangeSec = (status.nextChangeMinutes*60) - status.nowSeconds;
    } else {
        nextChangeSec = (24*60*60 - status.nowSeconds) + (status.nextChangeMinutes*60);
    }

    const cdH = String(Math.floor(nextChangeSec/3600)).padStart(2,'0');
    const cdM = String(Math.floor((nextChangeSec%3600)/60)).padStart(2,'0');
    const cdS = String(nextChangeSec%60).padStart(2,'0');
    document.getElementById('countdown').textContent = `До смены: ${cdH}:${cdM}:${cdS}`;
}

// Заполнение таблицы интервалов
function populateTable() {
    const tbody = document.getElementById('schedule-table');
    schedule.forEach(s => {
        const tr = document.createElement('tr');
        const tdInterval = document.createElement('td');
        tdInterval.textContent = s[5];
        const tdDirection = document.createElement('td');
        tdDirection.textContent = s[2] + ' ' + s[3];
        tdDirection.style.color = s[4];
        tr.appendChild(tdInterval);
        tr.appendChild(tdDirection);
        tbody.appendChild(tr);
    });
}

// Инициализация
populateTable();
updateBridgeStatus();
setInterval(updateBridgeStatus, 1000);
</script>

</body>
</html>
